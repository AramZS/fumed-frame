<!DOCTYPE html>
<html lang="en" class="logo-bright-inverted-theme article-theme">
  <head>
    <!-- 
      This is an HTML comment
      You can write text in a comment and the content won't be visible in the page
    -->
    <script src="https://unpkg.com/scrollama"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="preload"
      href="https://cdn.glitch.global/f20aef1f-8ae4-469e-a569-dd7a95c2daac/GarnetCapitals-Regular.woff2?v=1725315130751"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link rel="icon" href="https://glitch.com/favicon.ico" />

    <!--
      This is the page head - it contains info the browser uses
      Like the title, which appears on the browser tab but not inside the page
      Further down you'll see the content that displays in the page
    -->
    <title>Hello World!</title>

    <!-- The website stylesheet -->
    
    <link rel="stylesheet" href="/imgs.css" />
    <link rel="stylesheet" href="/style.css" />
    
    <link rel="stylesheet" href="/article.css" />

    <!-- The website JavaScript file -->
    <script src="/script.js" defer></script>
  </head>
  <body class="bg-main text-color-main">
    <!--
      The body includes the content you see in the page
      Each element is defined using tags, like this <div></div>
      The attributes like class="wrapper" let us style elements in the CSS
    -->
    <div class="wrapper">
      <div class="container" role="main">
        <button type="button" class="nav-expander-button">
          <span hidden>Search &amp; Section Navigation</span>
          <svg aria-hidden="true" class="css-1fe7a5q" viewBox="0 0 16 16">
            <rect x="1" y="3" fill="#f2e1c2" width="14" height="2"></rect>
            <rect x="1" y="7" fill="#f2e1c2" width="14" height="2"></rect>
            <rect x="1" y="11" fill="#f2e1c2" width="14" height="2"></rect>
          </svg>
        </button>
        <div id="menu">
          <nav>
            <ul>
              <li>Home</li>
              <li>Listen</li>
              <li>Stories</li>
              <li>About</li>
            </ul>
          </nav>
        </div>
        <div class="tower-left-tip fore-main halftone-bg"></div>
        <div class="main-header active-section">
          <header>
            <div class="header-image">
              <h1>
                FUMED
              </h1>
              <div class="vhs smokestacks-container">
                <div id="vhs-header">
                  <time class="datetime" datetime="2025-01-05T05:00:26-04:00">January 05, 2025</time>
                  <h2>Levels of cancer-causing benzene reached new heights in beleaguered Channelview. Regulators never told residents.</h2>
                  <h3>The highest levels exceed even Texasâ€™ benzene guideline â€” the weakest in the nation â€” but arenâ€™t being recorded by a state monitor. That means the communityâ€™s cancer risk could be higher than previously thought.</h3>
                </div>
                <img class="smokestacks" src="https://cdn.glitch.global/f20aef1f-8ae4-469e-a569-dd7a95c2daac/K-SOLV004.jpg?v=1736117595617" />
              </div>
            </div>
          </header>
        </div>
        <div class="tower-right-tip fore-main halftone-bg">

        </div>

        <div class="tower-left fore-main halftone-bg">
          <div class="tower-left-inner tower-inner">
            
          </div>
        </div>
        <div class="main-content">
          <main>
            <div class="main-body active-section">
              <br />
              <section id="article">
<span id="byline">By Savanna Strott </span>

<p>
  Dangerously high levels of the cancer-causing chemical benzene continue to plague Channelview, Texas, despite warnings from state regulators that began almost 20 years ago. 
                </p>

<p>
  Data collected during the stateâ€™s most recent air monitoring trips include one benzene reading that was three times the Texas hourly guideline, the weakest in the nation. In two instances, benzene fumes were so strong that scientists with the Texas Commission on Environmental Quality, or TCEQ, experienced headaches and had to leave the area.
                </p>

<p>
  The scientists visited Channelview, an unincorporated community east of Houston, in 2021 and 2022, but the TCEQ didnâ€™t finalize its reports on the findings until this year. Public Health Watch obtained them through open records requests.
                </p>

<p>
  Nearly half of the one-hour averages the TCEQâ€™s mobile monitoring team recorded exceeded what California says is safe. Three were at least 20 times higher than California allows. 
                </p>


<img src="https://cdn.glitch.global/f20aef1f-8ae4-469e-a569-dd7a95c2daac/Hourly%20samples%20graphic.png?v=1736119463661">

<p>
  The spikes the TCEQ monitoring team found in 2021 and 2022 are especially alarming because they werenâ€™t recorded by the stateâ€™s closest stationary monitor, whose annual readings are used to gauge residentsâ€™ cancer risk. Public Health Watch discovered the discrepancy when it compared hourly readings collected by the field scientists with hourly readings from the stationary monitor. 
                </p>

              </section>
              
              <section id="outro">


              </section>
              <!--  ðŸš§ TODO: ADD BUTTON HERE -->

              <!-- Once you've added the button from TODO.md, click it in the page -->
              <!-- Check out the function in script.js to see how it works -->
            </div>
          </main>
        </div>
        <div class="tower-right fore-main halftone-bg">
                  <div class="tower-right-inner tower-inner">
            
          </div>
        </div>

        <div class="footer-full fore-main">
          <!-- The footer holds our remix button â€” you can keep or delete it âœ‚ -->
          <footer class="footer">
            <div>Footer Text</div>

            <div class="links"></div>
          </footer>
        </div>
      </div>
    </div>
    <!-- runtime stuff -->
    <svg class="a-svg-filter">
      <filter id="wavy2">
        <feTurbulence
          x="5"
          y="0"
          baseFrequency="0.02"
          numOctaves="5"
          seed="1"
        />
        <feDisplacementMap in="SourceGraphic" scale="20" />
      </filter>
    </svg>
    
	<script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>

	<script>
    
    var getStoryData = function(){
      const fetchData = new Promise((resolve, reject) => {

      fetch('https://publichealthwatch.org/wp-json/wp/v2/tags')
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
          }
          return response.json();
        })
        .then(data => {
          resolve(data);
        })
        .catch(error => {
          console.error('There has been a problem with your fetch operation:', error);
        });
      })
      return fetchData;
    }
    
    let storyData = getStoryData();
    storyData.then(result => console.log(result))
    
		// using d3 for convenience
		var main = d3.select("main");
		var scrolly = main.select("#scrolly");
		var figure = scrolly.select("figure");
		var article = scrolly.select("article");
		var step = article.selectAll(".step");
    var figureEl = document.querySelector("#scrolly-figure")
    var figureElInner = document.querySelector("#scrolly-figure div");
    
			var imgSet = [
        "https://cdn.glitch.global/f20aef1f-8ae4-469e-a569-dd7a95c2daac/Channelview_25.jpg?v=1725829007195",
        "https://cdn.glitch.global/f20aef1f-8ae4-469e-a569-dd7a95c2daac/Channelview_06.jpg?v=1725829004369",
        "https://cdn.glitch.global/f20aef1f-8ae4-469e-a569-dd7a95c2daac/Channelview_02.jpg?v=1725829002975",
        "https://cdn.glitch.global/f20aef1f-8ae4-469e-a569-dd7a95c2daac/Channelview_09.jpg?v=1725829001495",
        "https://cdn.glitch.global/f20aef1f-8ae4-469e-a569-dd7a95c2daac/Channelview_13.jpg?v=1725831584421"
      ];  
    
    imgSet.forEach((imgUrl) => {
      var linkEl = document.createElement('link');
      linkEl.rel = "preload";
      linkEl.as = "image";
      linkEl.href = imgUrl;
     document.head.append(linkEl) 
    })
    
figureElInner.innerHTML = `<img src="${imgSet[0]}" />`;    
    const showMenuBar = function(){
      var menuEl = document.querySelector('#menu')
      menuEl.style.transition = "width 1s cubic-bezier(0.68, -0.55, 0.27, 1.55)"
      menuEl.classList.toggle('active')
    }
    
		// initialize the scrollama
		var scroller = scrollama();
    var navMenu = document.querySelector("#menu");
    var navButton = document.querySelector("button.nav-expander-button");
    navButton.addEventListener("click", () => { 
      showMenuBar(); 
    });

		// generic window resize listener event
		function handleResize() {
			// 1. update height of step elements
			var stepH = Math.floor(window.innerHeight * 0.75);
			step.style("height", stepH + "px");

			var figureHeight = window.innerHeight / 2;
			var figureMarginTop = (window.innerHeight - figureHeight) / 2;

			figure
				.style("height", figureHeight + "px")
				.style("top", figureMarginTop + "px");

			// 3. tell scrollama to update new element dimensions
			scroller.resize();
		}

		// scrollama event handlers
		function handleStepEnter(response) {

      console.log(response);
			var { element, direction, index } = response;

			// add color to current step only
			step.classed("is-active", function (d, i) {
				return i === response.index;
			});

			// update graphic based on step
      console.log('Scroll Handle: ', element, figure, figureElInner)
			figureElInner.innerHTML = `<img src="${imgSet[response.index+1]}" />`;
		}
    
    function handleSectionEnter(response) {

      console.log(response);
			var { element, direction, index } = response;

			// add color to current step only
			step.classed("is-active", function (d, i) {
				return i === response.index;
			});

			// update graphic based on step
      console.log('Scroll Handle Section: ', element, direction, index)
      console.log('Check window size', (window.innerWidth < 562))
      if (index == 1 && direction == "down" && (window.innerWidth >= 562)){
        document.querySelector('#menu').classList.add('active')
      } else {
        document.querySelector('#menu').classList.remove('active')
      }
		}


		function init() {

			// 1. force a resize on load to ensure proper dimensions are sent to scrollama
			handleResize();

			// 2. setup the scroller passing options
			// 		this will also initialize trigger observations
			// 3. bind scrollama event handlers (this can be chained like below)
			scroller
				.setup({
					step: "#scrolly article .step",
					offset: 0.33,
					debug: false
				})
				.onStepEnter(handleStepEnter);
      var scrollerTwo = scrollama();
      scrollerTwo
				.setup({
					step: "div.container .active-section",
					offset: 0,
					debug: false
				})
				.onStepEnter(handleSectionEnter);
		}

		// kick things off
		init();
	</script>
  </body>
</html>
